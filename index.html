<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë¶€ë™ì‚° íƒ€ì´ì¿¤ - ì¥¬ë”” ìŠ¤íƒ€ì¼</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #f8bbd0; /* ì¥¬ë”” ëŠë‚Œì˜ í•‘í¬ ë°°ê²½ */
            --panel-bg: #ffffff;
            --pixel-border: 4px solid #000;
        }

        body {
            background-color: var(--bg-color);
            font-family: 'Press Start 2P', cursive;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        .game-window {
            background: var(--panel-bg);
            border: var(--pixel-border);
            padding: 20px;
            width: 600px;
            text-align: center;
            box-shadow: 10px 10px 0px rgba(0,0,0,0.2);
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: #eee;
            border: var(--pixel-border);
            margin-bottom: 20px;
            font-size: 12px;
        }

        .house-display {
            border: var(--pixel-border);
            padding: 20px;
            margin-bottom: 20px;
            background: #fff9db;
        }

        .house-img {
            width: 120px;
            image-rendering: pixelated;
        }

        .price-tag {
            font-size: 20px;
            margin: 15px 0;
            color: #d63384;
        }

        .trend {
            font-size: 10px;
            margin-bottom: 10px;
        }

        .inventory {
            font-size: 12px;
            margin-bottom: 20px;
            color: #333;
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        button {
            font-family: 'Press Start 2P', cursive;
            padding: 15px 25px;
            border: var(--pixel-border);
            cursor: pointer;
            box-shadow: 0 4px 0 #000;
            outline: none;
        }

        button:active { transform: translateY(4px); box-shadow: none; }
        .buy-btn { background: #51cf66; color: white; }
        .sell-btn { background: #ff922b; color: white; }
        button:disabled { background: #adb5bd; cursor: not-allowed; }

        .msg { font-size: 10px; margin-top: 15px; color: #748ffc; height: 10px; }
    </style>
</head>
<body>

<div class="game-window">
    <div class="status-bar">
        <span>ğŸ’° ìì‚°: <span id="money">1000</span></span>
        <span>ğŸ  ë³´ìœ : <span id="my-houses">0</span></span>
    </div>

    <div class="house-display">
        <img src="https://img.icons8.com/pixel-bold/100/null/home.png" class="house-img" alt="house">
        <div class="label" style="font-size: 14px; margin-top: 10px;">í˜„ì¬ ë§¤ë¬¼: í•‘í¬ ê¶ì „</div>
        <div id="price" class="price-tag">800 G</div>
        <div id="trend" class="trend">ì‹œì„¸ ë³€ë™ ì¤‘...</div>
    </div>

    <div class="inventory">
        ë‚´ í‰ê·  êµ¬ë§¤ê°€: <span id="avg-price">0</span> G
    </div>

    <div class="controls">
        <button class="buy-btn" onclick="buyHouse()">êµ¬ë§¤</button>
        <button class="sell-btn" onclick="sellHouse()">íŒë§¤</button>
    </div>

    <div id="message" class="msg"></div>
</div>

<script>
    let money = 1000;
    let houses = 0;
    let currentPrice = 800;
    let totalSpent = 0;

    // 2ì´ˆë§ˆë‹¤ ì‹œì„¸ ë³€ë™
    function updatePrice() {
        const change = Math.floor(Math.random() * 401) - 200; // -200 ~ +200 ë³€ë™
        currentPrice += change;

        // ìµœì†Œ/ìµœëŒ€ ê°€ê²© ì œí•œ
        if (currentPrice < 300) currentPrice = 300;
        if (currentPrice > 1500) currentPrice = 1500;

        document.getElementById('price').innerText = currentPrice + " G";
        
        const trendEl = document.getElementById('trend');
        if (change > 0) {
            trendEl.innerText = "ğŸ“ˆ ì‹œì„¸ ìƒìŠ¹ ì¤‘!";
            trendEl.style.color = "red";
        } else {
            trendEl.innerText = "ğŸ“‰ ì‹œì„¸ í•˜ë½ ì¤‘!";
            trendEl.style.color = "blue";
        }
    }

    function buyHouse() {
        if (money >= currentPrice) {
            money -= currentPrice;
            totalSpent += currentPrice;
            houses++;
            updateUI();
            showMessage("ì§‘ì„ êµ¬ë§¤í–ˆìŠµë‹ˆë‹¤!");
        } else {
            showMessage("ëˆì´ ë¶€ì¡±í•©ë‹ˆë‹¤!");
        }
    }

    function sellHouse() {
        if (houses > 0) {
            money += currentPrice;
            houses--;
            if (houses === 0) totalSpent = 0; // ë‹¤ íŒ”ë©´ í‰ê· ê°€ ì´ˆê¸°í™”
            updateUI();
            showMessage("ì§‘ì„ íŒë§¤í–ˆìŠµë‹ˆë‹¤! ì´ë“: " + currentPrice + "G");
        } else {
            showMessage("íŒ” ìˆ˜ ìˆëŠ” ì§‘ì´ ì—†ìŠµë‹ˆë‹¤!");
        }
    }

    function updateUI() {
        document.getElementById('money').innerText = money;
        document.getElementById('my-houses').innerText = houses;
        const avg = houses > 0 ? Math.floor(totalSpent / (houses + (totalSpent===0?0:0))) : 0; // ë‹¨ìˆœí™”ëœ í‰ê· 
        document.getElementById('avg-price').innerText = houses > 0 ? Math.floor(totalSpent / (houses + (houses===0?0:houses-houses))) : 0;
    }

    function showMessage(text) {
        const msgEl = document.getElementById('message');
        msgEl.innerText = text;
        setTimeout(() => msgEl.innerText = "", 2000);
    }

    setInterval(updatePrice, 2000); // 2ì´ˆë§ˆë‹¤ ê°€ê²© ì—…ë°ì´íŠ¸
</script>

</body>
</html>